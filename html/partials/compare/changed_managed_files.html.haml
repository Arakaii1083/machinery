- if @diff["changed_managed_files"]
  %a.scope_anchor{ id: "changed_managed_files" }
  .scope#changed_managed_files_container
    .row
      .col-xs-1
        %a{ href: "#changed_managed_files" }
          %img.over.scope_logo_big{ :src => "/assets/logo-changed-managed-files.png",
            "data-toggle" => "popover",
            :title => "Changed Managed Files",
            "data-content" => "#{scope_help("changed_managed_files")}" }
        %span.toggle{ title: "Collapse/Expand" }
      .col-xs-11
        %h2
          Changed Managed Files
          .scope-summary
            - if @diff["changed_managed_files"].only_in1
              %span.summary-part
                #{@description_a.name}:
                #{safe_length(@diff["changed_managed_files"].only_in1, :files)} files
            - if @diff["changed_managed_files"].only_in2
              %span.summary-part
                #{@description_b.name}:
                #{safe_length(@diff["changed_managed_files"].only_in2, :files)} files
            - if @diff["changed_managed_files"].changed
              %span.summary-part
                %a{ href: "#changed_managed_files_changed" }
                  changed
                = ": #{@diff["changed_managed_files"].changed.length} changed_managed_files"
            - if @diff["changed_managed_files"].common
              %span.summary-part
                %a.show-common-elements{ href: "#changed_managed_files_both" }<
                  both
                = ": #{safe_length(@diff["changed_managed_files"].common, :files)} files"
    .row.scope_content.collapse.in
      .row
        .col-xs-1
        .col-xs-5.table_container
          - if safe_length(@diff["changed_managed_files"].only_in1, :files) > 0
            = only_in_a
            = render_partial "compare/changed_managed_file_list",
              list: @diff["changed_managed_files"].only_in1
        .col-xs-1
        .col-xs-5.table_container
          - if safe_length(@diff["changed_managed_files"].only_in2, :files) > 0
            = only_in_b
            = render_partial "compare/changed_managed_file_list",
              list: @diff["changed_managed_files"].only_in2
      - if @diff["changed_managed_files"].changed
        %a.both_anchor{ id: "changed_managed_files_changed" }
        .row
          .col-xs-1
          .col-xs-11.table_container
            = changed
            %ul.changed
              - changed_elements("changed_managed_files", key: "name").each do |change|
                %li= change
      - if safe_length(@diff["changed_managed_files"].common, :files) > 0
        %a.both_anchor{ id: "changed_managed_files_both" }
        .row
          .col-xs-1
          .col-xs-11
            %a.show-common-elements{ href: "#changed_managed_files_both" }
              Show common elements in changed-managed-files
            %a.hide-common-elements{ href: "#", style: "display: none" }
              Hide common elements in changed-managed-files
        .row.scope_common_content.collapse
          .col-xs-1
          .col-xs-10.table_container
            = in_both
            = render_partial "compare/changed_managed_file_list",
              list: @diff["changed_managed_files"].common
