.row
  .h1
    System Descriptions
.row
  .filter-input.col-md-offset-1
    %input.col-md-8#filter{ :placeholder => "search" }
    %a.btn.btn-default.btn-reset{ :href => "#", :title => "Reset Filter" }
      %span Reset
.descriptions-container
  - @all_descriptions.each do |key, value|
    - selected = ""
    - left = { href: "#", disabled: "disabled" }
    - right = { href: "#", disabled: "disabled" }
    - expand = { :href => "/#{key}", title: "Show description" }
    - if @description && @description.name == key
      - selected = "selected-description"
      - expand = { href: "#", disabled: "disabled", title: "Show description" }
    - if @description && @description.name != key
      - right = { href: "/compare/#{@description.name}/#{key}", title: "Compare right" }
    - if @description_a && @description_a.name != key
      - right = { href: "/compare/#{@description_a.name}/#{key}", title: "Compare right" }
    - if @description_b && @description_b.name != key
      - left = { href: "/compare/#{key}/#{@description_b.name}", title: "Compare left" }
    - if @description_b && @description_b.name == key
      - selected = "selected-description-right"
      - right = { href: "#", disabled: "disabled" }
    - if @description_a && @description_a.name == key
      - selected = "selected-description-left"
      - left = { href: "#", disabled: "disabled" }
    .description-container{ class: selected }
      .row
        %span.description-name
          = key
        %a.btn.btn-default.action-btn.action-btn-first{ expand }
          %span.glyphicon.glyphicon-resize-full
        %a.btn.btn-default.action-btn{ right }
          %span.glyphicon.glyphicon-arrow-right
        %a.btn.btn-default.action-btn{ left }
          %span.glyphicon.glyphicon-arrow-left
      .row
        %span.description-date
          %span.glyphicon.glyphicon-time.icon
          = value["date"]
        %span.description-ip
          %span.icon.at-icon
            @
          = value["host"].join(", ")
      .row
        %span.nav-bar-title
          - value["scopes"].map { |s| s.match(/^[a-z\-]*/)[0].gsub("-", "_") }.each do |scope|
            %a.btn.btn-default.btn-sm{ :href => "##{scope}", :title => scope_title(scope),
              "data-toggle"=>"popover", "data-content" => scope_help(scope),
              :class => nav_class(scope) }
              %span= scope_initials(scope)

